{% extends layout_template %}


{% block content %}

  {% include 'report/filters.html' %}

  {% if objects.count() %}

    {% set colspan_all=35 if region else 36 %}

    <table class="complex_datatable datatable">

      <thead>
        <tr class="section-header">
          <th colspan="{{ colspan_all }}">
            ETC/BD treated member states' data
          </th>
        </tr>

        <tr>
          <th rowspan="2">MS</th>
          {% if not region %}<th rowspan="2">Reg</th>{% endif %}
          <th colspan="5">Range</th>
          <th colspan="6">Population</th>
          <th colspan="6">Habitat for the species (km<sup>2</sup>)</th>
          <th colspan="2" rowspan="2"><abbr title="Future prospects">FP</abbr></th>
          <th colspan="5">Overall assessment</th>
          <th colspan="4">Grided maps(km<sup>2</sup>)</th>

          {# Padding #}
          <td colspan="5" rowspan="2"></td>
        </tr>
        <tr>
          <th>Area</th>
          <th colspan="2">%MS</th>
          <th><abbr title="Trend">T</abbr></th>
          <th>Ref.</th>

          <th colspan="2">Size&amp;Unit</th>
          <th colspan="2">%MS</th>
          <th><abbr title="Trend">T</abbr></th>
          <th>Ref.</th>

          <th>Area</th>
          <th colspan="2">%MS</th>
          <th>Qual.</th>
          <th><abbr title="Trend">T</abbr></th>
          <th>Suitable</th>

          <th colspan="2">Curr CS</th>
          <th><abbr title="Trend">T</abbr></th>
          <th>Prev CS</th>
          <th>Nat of ch</th>

          <th>Range</th>
          <th title="%GR">%MS</th>
          <th>Distrib.</th>
          <th title="%GD">%MS</th>
        </tr>
      </thead>

      <tbody>
        {% for row in objects %}
        {% set visible = can_view(row, restricted_countries) %}
        {% set qa_errors = record_errors(row) %}
        <tr {% if row.is_assesm %}class="assesm"{% endif %}>
          <td>{{ row.eu_country_code }}</td>
          {% if not region %}<td>{{ row.region }}</td>{% endif %}

          {% if not visible %}
          <td colspan="4">
            {{ row.eu_country_code }} has provided a report to the European Commission under Article 17
          </td>
          {% else %}

          {#- Range columns -#}
          {% include 'summary/species/content/range.html' with context %}

          {#- Population columns -#}
          {% include 'summary/species/content/population.html' with context %}

          {#- Habitat columns -#}
          {% include 'summary/species/content/habitat.html' with context %}

          {#- Prospects -#}
          {% include 'summary/species/content/future_prospects.html' with context %}

          {#- Overall assessment -#}
          {% include 'summary/species/content/overall.html' with context %}

          {#- Grided maps columns -#}
          {% include 'summary/species/content/grided_maps.html' with context %}

          {# Padding #}
          <td colspan="5"></td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>

    </table>

  {% endif %}

{% endblock %}
