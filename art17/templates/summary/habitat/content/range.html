{% from '_macros.html' import parse_errors with context %}

<td {{ parse_errors('range_surface_area', row, qa_errors, classes='number') }}>
  {{ row.range_surface_area|str2num }}
</td>


{% set classes=CONCLUSION_CLASSES.get(row.conclusion_range, '') + ' number' %}
{% set title=COUNTRY_ASSESSMENTS.get(row.conclusion_range, '') %}
<td {{ parse_errors(['conclusion_range', 'percentage_range_surface_area'],
                    row, qa_errors, title=title, classes=classes) }}>
  {{ row.percentage_range_surface_area|str2num }}
</td>

{% set qtitle, qclasses = parse_qa_errors('range_yearly_magnitude', row,
                                         qa_errors) %}
<td class="{{ qclasses }} center"
    title="{%- if qtitle -%}{{ qtitle }}
           {%- elif row.range_yearly_magnitude -%}
           Yearly magnitude = {{ row.range_yearly_magnitude}}
          {%- endif -%}">
  {{ row.range_trend or 'N/A' }}
</td>

<td {{ parse_errors(['complementary_favourable_range_q',
                     'complementary_favourable_range'],
                     row, qa_errors, '', 'number section-border') }}>
  {% set range_q = row.complementary_favourable_range_q or '' %}
  {% set range = row.complementary_favourable_range %}

  {% if range_q or range %}
    {{ range_q }}{{range|str2num('')}}
  {% else %}
    N/A
  {% endif %}
  </td>
