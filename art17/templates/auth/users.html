{% extends layout_template %}


{% block breadcrumbs %}
  {% from '_macros.html' import breadcrumbs %}
  {{ breadcrumbs(APP_BREADCRUMBS + [
      ('users list', None),
    ]) }}
{% endblock %}


{% block content %}
  <h1>Users</h1>
 
  <table class="table-list">
    <thead>
      <tr>
        <th rowspan="2">Username</th>
        <th rowspan="2">Created</th>
        <th rowspan="2">For</th>
        <th rowspan="2">Qualified as</th>
        <th colspan="4" class="text-center">Roles</th>
        <th rowspan="2" class="text-right">Status</th>
      </tr>
      <tr>
        <th class="text-center"><abbr title="Administrator">Adm.</abbr></th>
        <th class="text-center"><abbr title="ETC Expert">ETC</abbr></th>
        <th class="text-center"><abbr title="NAT Expert">NAT</abbr></th>
        <th class="text-center"><abbr title="Stakeholder">Stk.</abbr></th>
      </tr>
    </thead>
    <tbody>
    {% for user in user_list %}
      {% set each_roles = role_map.get(user.id, []) %}
      <tr>
        <td>
          <a href="{{ url_for('.admin_user', user_id=user.id) }}">{{ user.id }}</a>
        </td>
        <td>{{user.confirmed_at or ''}}2010-04-22 08:06<br>
        via {{ 'Eionet' if user.is_ldap else 'local' }}</td>
        <td>
          <div>{{ user.name or '' }}First-Last Name</div>
          <div>{{ user.institution or '' }}Institution</div>
          <div><a href="mailto:{{ user.email }}">{{ user.email }}</a></div>
        </td>
        <td>{{ user.qualification or '' }}Qualification</td>
          <td class="text-center">
            {% if 'admin' in each_roles %}
            <i class="fa fa-check"></i>
            {% endif %}
          </td>
          <td class="text-center">
            {% if 'etc' in each_roles %}
            <i class="fa fa-check"></i>
            {% endif %}
          </td>
          <td class="text-center">
            {% if 'nat' in each_roles %}
            <i class="fa fa-check"></i>
            {% endif %}
          </td>
          <td class="text-center">
            {% if 'stakeholder' in each_roles %}
            <i class="fa fa-check"></i>
            {% endif %}
          </td>
        <td class="text-right">
          {% if not user.active %}inactive{% endif %}Active
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
{% endblock content %}
