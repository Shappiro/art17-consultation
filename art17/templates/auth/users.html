{% extends layout_template %}


{% block content %}
  <h1>Users</h1>

  <table class="datatable">
    <thead>
      <th>ID</th>
      <th>name</th>
      <th>email</th>
      <th>institution</th>
      <th>qualification</th>
      <th>source</th>
      <th>roles</th>
      <th>status</th>
      <th></th>
    </thead>

    {% for user in user_list %}
      <tr>
        <td>{{ user.id }}</td>
        <td>{{ user.name or '' }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.institution or '' }}</td>
        <td>{{ user.qualification or '' }}</td>
        <td>{{ 'Eionet' if user.is_ldap else 'local' }}</td>
        <td>{{ ', '.join(role_map.get(user.id, [])) or '-' }}</td>
        <td>
          {% if user.active %}
            active
          {% elif user.waiting_for_activation %}
            new
          {% else %}
            inactive
          {% endif %}
        </td>
        <td>
          <a href="{{ url_for('.admin_user', user_id=user.id) }}">
            edit
          </a>
        </td>
      </tr>
    {% endfor %}
  </table>
{% endblock content %}
